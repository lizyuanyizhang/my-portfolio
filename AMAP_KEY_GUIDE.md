# 高德地图 API Key 获取指南 | Amap API Key Guide

本项目的**地理轨迹地图**需要高德地图 JS API 与地理编码能力。按以下步骤即可获取 Key。

---

## 一、注册与登录

1. 打开 [高德开放平台](https://lbs.amap.com)
2. 点击右上角「注册」或「登录」
3. 使用手机号 / 支付宝 / 微信登录即可

> 💡 类比：高德开放平台像「地图服务的超市」，Key 就像你的「会员卡」，凭卡才能调用地图、地理编码等能力。

---

## 二、创建应用

1. 登录后进入 [控制台](https://console.amap.com/)
2. 左侧菜单选择 **应用管理** → **我的应用**
3. 点击右上角 **创建新应用**
4. 填写：
   - **应用名称**：如「数字世界个人主页」
   - **应用类型**：选「个人开发」或「企业」（个人项目选前者）

---

## 三、添加 Key（关键步骤）

1. 在刚创建的应用下，点击 **添加 Key**
2. 填写表单：

| 字段 | 说明 | 建议值 |
|------|------|--------|
| **Key 名称** | 便于区分的名字 | `地理轨迹地图` |
| **服务平台** | 一定要选对 | **Web 端 (JS API)** |
| **白名单** | 限制可调用的域名 | 开发阶段可填 `*`；上线后填你的域名如 `yuanyizhang.com` |

3. 点击「提交」，Key 会立刻生成

---

## 四、获取安全密钥（可选但推荐）

部分高级功能需要「安全密钥 + Key」配合使用：

1. 在应用详情页找到该 Key，点击「设置」
2. 若看到「安全密钥 (securityJsCode)」，复制保存
3. 在 `.env.local` 中同时配置：

```env
VITE_AMAP_KEY=你的Key
VITE_AMAP_SECURITY_CODE=你的安全密钥  # 可选
```

---

## 五、配置到项目

1. 复制控制台显示的 **Key** 字符串
2. 在项目根目录的 `.env.local` 中新增一行：

```env
# 高德地图 - 地理轨迹地图
VITE_AMAP_KEY=你复制的Key
```

3. 重启开发服务器：`npm run dev`

---

## 六、配额与限制

| 类型 | 个人开发者 | 说明 |
|------|------------|------|
| **JS API 调用** | 约 30 万次/天 | 地图渲染、标记、轨迹等 |
| **地理编码** | 约 15 万次/月 | 地址 → 经纬度 |
| **Key 有效期** | 1 年 | 到期需在控制台续期 |

一般个人站点访问量下，这些配额足够使用。

---

## 七、常见问题

### Q：选 Web 端还是 Web 服务？

- **Web 端 (JS API)**：前端地图展示、标记、轨迹、地理编码（我们需要的）
- **Web 服务**：服务端 HTTP 接口，用于纯后端调用

本项目使用 **Web 端 (JS API)** 即可。

### Q：白名单填什么？

- 本地开发：`*` 或 `127.0.0.1`
- 上线后：填你的正式域名，如 `www.yuanyizhang.com`

### Q：Key 泄露了怎么办？

到控制台将该 Key 删除或重置，并重新生成。

### Q：地图一直显示「正在加载地图...」不出现结果？

1. **安全密钥**：2021年12月以后申请的 Key 必须配置 `VITE_AMAP_SECURITY_CODE`，否则脚本无法完成初始化。
2. **Key 服务平台**：需勾选 **Web 端 (JS API)**；若使用地理编码，可额外勾选 **Web 服务**。
3. **白名单**：开发阶段设为 `*` 或 `127.0.0.1`；上线后填正式域名（如 `yuanyizhang.github.io`）。
4. **浏览器控制台**：F12 → Console，查看是否有高德报错（如 INVALID_USER_KEY、INVALID_USER_SCODE 等）。

---

## 八、参考链接

- [高德开放平台](https://lbs.amap.com)
- [创建应用和 Key（官方文档）](https://lbs.amap.com/api/webservice/create-project-and-key)
- [JS API 2.0 地理编码](https://lbs.amap.com/api/javascript-api-v2/guide/services/geocoder)
